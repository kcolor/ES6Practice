<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	</head>
	<body>
		<!--
			Promise----承诺
			优势：
			异步请求、操作：操作之间互不印象，同时进行多个操作
			同步：同时只能做一件事
			缺点
			异步：代码更加复杂
			同步：代码简单
			Promise--消除异步操作
				**用同步一样的方式，来书写异步代码
			Promise用法：
			then() all() catch() race()--竞速
		-->
		<!--用法-->
		<script type="text/javascript">
			//基础版
//			let p = new Promise(function(resolve,reject){
//				//异步代码 -----resolve:成功 ---reject:失败
//				$.ajax({
//					url:'./data.json',
//					dataType:'json',
//					success(arr){
//						resolve(arr);
//					},
//					error(err){
//						reject(err);
//					}
//				})
//			})
//			p.then(function(arr){
//				alert('成功了'+arr)
//			},function(err){
//				alert('失败了'+err)
//			})
			//升级版
//			function createPromise(url){
//				return new Promise(function(resolve,reject){
//					//异步代码 -----resolve:成功 ---reject:失败
//					$.ajax({
//						url,
//						dataType:'json',
//						success(arr){
//							resolve(arr);
//						},
//						error(err){
//							reject(err);
//						}
//					})
//				})
//			}
//			Promise.all([
//				createPromise('./data.json'),
//				createPromise('./arr.json')
//			]).then(function(arr){
//				alert('成功了')
//				let [obj,arrs] = arr;
//				console.log(obj,arrs)
//			},function(err){
//				alert('失败了'+err)
//			})
			//jQuery高版本--自带返回Promise
			Promise.all([
				$.ajax({url:'./data.json',dataType:'json'}),
				$.ajax({url:'./arr.json',dataType:'json'}),
			]).then(res=>{
				alert('成功了');
				let [obj,arrs] = res;
				console.log(obj,arrs)
			},err=>{
				alert('失败了'+err);
			})
			
		</script>
	</body>
</html>
